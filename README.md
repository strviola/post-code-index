# 実行説明資料

## 概要

日本郵便が提供する [郵便番号データ](http://www.post.japanpost.jp/zipcode/dl/readme.html) から N-gram インデックスを作成し、これを利用してキーワードが含まれる郵便番号データを検索・表示するプログラムです。

### 動作環境

- Ruby 2.3　以上

## 初期設定

1. メールに添付した ZIP ファイルを解凍、もしくは [GitHub リポジトリ](https://github.com/strviola/post-code-index) からソースコードをクローンし、ローカル環境の適当な場所に配置してください。
1. ディレクトリに移動します。 ```cd post-code-index/```
1. `bin/setup` を実行します。

## 実行方法

```
bin/search <keyword> [<n>]
```

### 引数について

- keyword (必須)
  - 検索キーワードです。地名の一部を指定してください。
  - 指定しない場合、プログラムは実行されません。
- n (任意)
  - 指定した場合、 n-gram インデックスを作成し、これを元に検索を行います。
  - 省略した場合は 2 が設定されます。
  - 数字以外の文字列を指定した場合、エラーとして扱いプログラムは実行されません。
  - keyword の文字列長より大きい数値を指定した場合、入力は無視され keyword の文字列長がプログラム中で使用されます。

## 実行例

```
bin/search 大手町
```

- n が指定されていないため 2-gram インデックスを作成します。
- キーワード "大手", "手町" でそれぞれ検索し、両者が含まれる郵便番号レコードを表示します。

```
bin/search 渋谷 1
```

- 1-gram インデックスを検索に使用します。
- "渋", "谷" が両方含まれる郵便番号レコードを表示します。
- 課題の説明中で実行例として表示された例と同等の結果となります。 (引数 "1" が必要)

```
bin/search 日本橋 9
```

- 引数 "9" は keyword の文字列長 3 より長いため無視されます。
- 検索には 3-gram インデックスを使用します。
